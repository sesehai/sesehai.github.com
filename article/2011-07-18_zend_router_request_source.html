<!DOCTYPE html>
<html>
<head>
<title>Zend Framework router And request 源码</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="Stylesheet" type="text/css" href="../style.css" />
<script>var root_path = '';</script>
</head>
<body>
<div id="all">
<div id="header">
	<ul id="top-nav">
		<li>
			<a href="../index.html">首页</a>
		</li>
		<li>
			<a href="../archive/">文档</a>
		</li>
		<li>
			<a href="../article/">文摘</a>
		</li>
		<li>
			<a href="../diary/diary.html">日记</a>
		</li>
		<li>
			<a href="../sites.html">Sites</a>
		</li>
	</ul>
</div>
<div id="cse"></div>
<div id="main">

<div class="toc">
<ul>
<li><a href="#toc_0.1">Zend framework router and request 源码</a>
<ul>
<li><a href="#toc_0.1.1">Zend_Controller_Router_Rewrite</a>
</ul>
</ul>
</ul>
</div>
<h2 id="toc_0.1">Zend framework router and request 源码</h2>
<p>
<em>2011-07-18</em>
</p>

<h3 id="toc_0.1.1">Zend_Controller_Router_Rewrite</h3>

<pre  class="brush:php">
/**
 * Find a matching route to the current PATH_INFO and inject
 * returning values to the Request object.
 *
 * @throws Zend_Controller_Router_Exception
 * @return Zend_Controller_Request_Abstract Request object
 */
public function route(Zend_Controller_Request_Abstract $request)
{

	if (!$request instanceof Zend_Controller_Request_Http) {
		require_once 'Zend/Controller/Router/Exception.php';
		throw new Zend_Controller_Router_Exception('Zend_Controller_Router_Rewrite requires a Zend_Controller_Request_Http-based request object');
	}

	if ($this-&gt;_useDefaultRoutes) {
		$this-&gt;addDefaultRoutes();
	}

	/** Find the matching route */
	foreach (array_reverse($this-&gt;_routes) as $name =&gt; $route) {

		// TODO: Should be an interface method. Hack for 1.0 BC  
		if (!method_exists($route, 'getVersion') || $route-&gt;getVersion() == 1) {
			$match = $request-&gt;getPathInfo();
		} else {
			$match = $request;
		}

		if ($params = $route-&gt;match($match)) {
			$this-&gt;_setRequestParams($request, $params);
			$this-&gt;_currentRoute = $name;
			break;
		}
	}

</pre>

</div>
<div id="footer">
    <p>&copy; 2011 sesehai &nbsp;&nbsp;</p>
</div>
</div>
<script src="../jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="../vimwiki.js" type="text/javascript"></script>
</body>
</html>
