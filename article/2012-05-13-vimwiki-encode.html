<!DOCTYPE html>
<html>
<head>
<title>Vimwiki 中文编码处理|海的心情</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="Stylesheet" type="text/css" href="../style.css" />
<link type="image/ico" rel="shortcut icon" href="favicon.ico"/>
<script>var root_path = '';</script>
</head>
<body>
<div id="all">
<div id="header">
	<ul id="top-nav">
		<li>
			<a href="../index.html">(@_@) 海的心情</a>
		</li>
		<li>
			<a href="../archive/">文档</a>
		</li>
		<li>
			<a href="../article/">文摘</a>
		</li>
		<li>
			<a href="../diary/diary.html">日记</a>
		</li>
		<li>
			<a href="../sites.html">Sites</a>
		</li>
	</ul>
</div>
<div id="cse"></div>
<div id="main">

<div class="toc">
<ul>
<li><a href="#toc_0.1">Vimwiki 中文编码的处理</a>
<li><a href="#toc_0.2">网上总结：</a>
<ul>
<li><a href="#toc_0.2.1">Vim文件保存编码配置</a>
<ul>
<li><a href="#toc_0.2.1.1">首先是Vim编码配置的三个选项：</a>
<li><a href="#toc_0.2.1.2">举例说明:</a>
</ul>
</ul>
<li><a href="#toc_0.3">参考</a>
</ul>
</ul>
</div>

<h2 id="toc_0.1">Vimwiki 中文编码的处理</h2>

<p>
日期：2012-05-13
</p>

<p>
在windowns 操作系统上使用 Gvim + vimwiki来写东西时：
#新建页面":tabnew"，设置好文件名，打开文件开始写东西；
#写完 ":w" 保存，":VimwikiAll2HTML"生成html文件;
#代开 github 命令行客户端:
</p>
<ul>
<li>
在html文件目录下，执行"git add ./","git commit ./" ,"git push git@github.com:sesehai/sesehai.github.com.git";

<li>
在vimwiki目录下，执行"git add ./","git commit ./","git push git@github.com:sesehai/vimwiki.git"

</ul>
<p>
#浏览器中代开- <a href="http://sesehai.github.com">http://sesehai.github.com</a> 查看相应的文章，发现中文是乱码；
#github上代开- 该文件，发现同样是乱码；
</p>

<p>
以上问题没有找到很好的解决方法，只有一个笨拙的方法：
</p>

<ul>
<li>
新建页面后，执行":set fileencoding=utf-8",":w",就可以解决了。

</ul>

<h2 id="toc_0.2">网上总结：</h2>

<h3 id="toc_0.2.1">Vim文件保存编码配置</h3>

<p>
让Vim能正确显示和保存各种编码文件内容是个头疼的事情，今天专注的把这个问题研究一下
</p>

<h4 id="toc_0.2.1.1">首先是Vim编码配置的三个选项：</h4>

<ol>
<li>
encoding(enc):

</ol>

<p>
此项目配置的是vim的默认显示编码，如果你打开的文件编码与该属性配置的编码不同，那么Vim会将编码自动转换到配置编码再显示
</p>

<ol>
<li>
fileencodings(fencs):

</ol>

<p>
此项目配置的是一个编码列表，Vim在读取文件的时候，会根据这里的编码自动检测，如果检测失败则尝试下一个，直到检测成功为止。如果一直没有转换成功，则此值会为空
</p>

<ol>
<li>
fileencoding(fenc):

</ol>

<p>
这个项目配置的是新建文件和保存文件时文件的编码，如果它的值与encoding(enc)不一样，那么保存的时候Vim会自动把文件内容由encoding(enc)的编码转换为fileencoding(fenc)配置编码再保存。而读取文件的时候，该选项的值会自动同步为fileencodings(fencs):配置的有效编码。
</p>

<h4 id="toc_0.2.1.2">举例说明:</h4>

<p>
如果我们配置
</p>

<p>
encoding(enc):utf-8
</p>

<p>
fileencodings(fencs):utf-8，cp936
</p>

<p>
fileencoding(fenc):cp936
</p>

<p>
那么我们打开一个cp936编码的文件，Vim会将内容转换为utf-8格式来显示，但是保存的时候文件的编码却依然是cp936
</p>

<p>
如果我的工作环境主要是编辑utf-8，偶尔会修改一下cp936的编码，我们该怎么配置呢？
</p>

<p>
首先我们可以把fileencoding留空，然后只配置fileencodings(fencs):utf-8，cp936
</p>

<p>
按照上面的规则，Vim就会自动把文件保存为cp936的编码了
</p>

<p>
如果我编辑了一个utf-8文件，想把它以cp936的格式保存，该怎么办呢？
</p>

<p>
在命令行模式输入 :set fenc=cp936 然后保存文件即可，保存之后再输入:set fenc=utf-8就可以继续编辑其他utf-8文件了。
</p>



<h2 id="toc_0.3">参考</h2>
<p>
<a href="http://be-evil.org/post-158.html">http://be-evil.org/post-158.html</a>
<a href="http://be-evil.org/post-158.html">http://be-evil.org/post-158.html</a>
</p>

</div>
<div id="footer">
    <p>
	<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/" rel="license">
		<img src="http://creativecommons.org/images/public/somerights20.png" style="border-width: 0" alt="Creative Commons License">
	</a><br>
	本网站作品采用<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/" rel="license">知识共享署名-非商业性使用-相同方式共享 2.5 许可协议</a>进行许可。<br> 
    &copy; 2011 sesehai &nbsp;&nbsp;
    </p>
</div>
</div>
<script src="../jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="../vimwiki.js" type="text/javascript"></script>
</body>
</html>
